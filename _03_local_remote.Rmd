---
title: "Git & GitHub"
output:
  xaringan::moon_reader:
    css: [default, rd.css, rd-font.css, "hygge"]
    lib_dir: assets
    seal: false
    nature:
      highlightStyle: dracula
      countIncrementalSlides: false
      beforeInit: "macros.js"
---


---
# Local and remote

```{r setup_03, include = FALSE}
source("_setup.R")
# knitr::clean_cache(TRUE)
htmltools::tagList(
  xaringanExtra::use_clipboard(
    button_text = "<i class=\"fa fa-clipboard\"></i>",
    success_text = "<i class=\"fa fa-check\" style=\"color: #37abc8\"></i>",
  ),
  rmarkdown::html_dependency_font_awesome()
)
xaringanExtra::use_scribble()
```


---
# Prerequisite


## `r gt()` installed


```{bash}
git --version
```

--

## Access to a `r gt()` server 

- **`r gh()` account**
- `r gl()` account 




---

class: inverse, center, middle

# Setting up your remote repository

![:custom_hr]()

## `r gh()`


---
# Create a repository on `r gh()`

### `r lk()` https://docs.github.com/en/get-started/quickstart/create-a-repo

--

### [Pro Git](https://git-scm.com/book/en/v2/GitHub-Account-Setup-and-Configuration)

--

### `r lc()` Let's do this


---
# Three ways to access a `r gh()` repo

### Https

- `r nf()` Since August 2021 a personal access token (PAT) is required
- [Creating a personal access token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)
- https://cran.r-project.org/web/packages/credentials/vignettes/intro.html
- https://usethis.r-lib.org/articles/git-credentials.html
- https://git-scm.com/docs/git-credential-store

--

### SSH (preferred)

- https://phoenixnap.com/kb/generate-ssh-key-windows-10
- https://ndpsoftware.com/git-cheatsheet.html#loc=workspace;

--

### [GitHub CLI](https://cli.github.com/)



---
# Add remote repo to your local repo

## Https 

```sh
$ git remote add origin https://github.com/inSilecoInc/proj1.git
```
--

## SSH

```sh
$ git remote add origin git@github.com:inSilecoInc/proj1.git
```

- Now `r gt()` is aware of the existence of a remote repository 
- NB: a remote repository is just another repo


---
# Track the remote branch 

```sh
$ git push -u origin main
```

(same as `$ git push --set-upstream origin main`)


---
# What happened?

TODO



---
### `r lc()` Let's do this

## Add a remote.



---
# Clone and fork?

### `r lc()` Let's do this

???
delete add re-initiate proj1 with a readme and a gitignore for clone


---
# Using several remotes

### I set up 3 remotes for one of our repo 

https://github.com/inSilecoInc/demogit

```sh
$ git remote -vv
mirror	git@gitlab.com:KevCaz/demogit.git (fetch)
mirror	git@gitlab.com:KevCaz/demogit.git (push)
mirror2	git@raspberrypi.local:/srv/git/demogit.git (fetch)
mirror2	git@raspberrypi.local:/srv/git/demogit.git (push)
origin	git@github.com:inSilecoInc/demogit.git (fetch)
origin	git@github.com:inSilecoInc/demogit.git (push)
```



---

class: inverse, center, middle

# Fetch, pull & push

![:custom_hr]()

---
# Fetch, pull & push

> git-fetch - Download objects and refs from another repository

> git-pull - Fetch from and integrate with another repository or a local
       branch

> git-push - Update remote refs along with associated objects


---
# Fetch

### Download missing refs and object 

```sh
$ git fetch
```

--

```sh
$ git fetch origin
```

--

```sh
$ git fetch --all
```

### You don't have a copy of the local remote 

--

### Having a local repo and a remote repo is simply about having a more complex history



---
# Pull 

## Fetch then merge tracked branch


---
# Push 

## Update remote branch





---

class: inverse, center, middle

# Remote branches

![:custom_hr]()

## `r gh()`


---
# Create a local branch 


---
# Track it on the remote repo 


---
# Cheat sheet

- `r lk()` https://ndpsoftware.com/git-cheatsheet.html#loc=workspace






---

class: inverse, center, middle

# Advanced features

![:custom_hr]()


---
# Collaborative workflows

- `lk()` https://nvie.com/posts/a-successful-git-branching-model/
- `lk()` https://danielkummer.github.io/git-flow-cheatsheet/


---
# Configuration: `git config`

- `lk()` https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration


```sh
$ git config --global user.email "kevin.cazelles@gmail.com"
```

```sh
$ git config --local core.editor emacs
```

--

- `lk()` https://git-scm.com/book/en/v2/Git-Basics-Git-Aliases

```sh
$ git config --global alias.co checkout
```
- then `git co` = `git checkout`
- shell aliased


---
# Some commands you might use at some point

- `git diff`: check difference between commits (and more)
- `git show`: inspect a commit 
- `git rebase -i`: rewrite history interactively
- `git reset`: undo commits
